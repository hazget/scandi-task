{"ast":null,"code":"var _jsxFileName = \"D:\\\\projects\\\\scandi-task\\\\client\\\\src\\\\components\\\\Currencies.jsx\";\nimport React, { Component } from 'react';\nimport vectorIcon from \"../icons/vector.svg\";\nimport vectorUp from \"../icons/vector_up.svg\";\nimport styled from \"styled-components\";\nimport ReactDOM from \"react-dom\";\nimport { updateCurrency } from '../features/currency/currencySlice';\nimport { calculateTotals } from '../features/cart/cartSlice';\nimport { toggleCurrenciesModal } from '../features/backdrops/currenciesBackdrop';\nimport { toggleMinicartModal } from '../features/backdrops/minicartBackdrop';\nimport withParams from './withParams';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CurrenciesContainer = styled.div`\n  position: relative;\n  font-weight: 500;\n  font-size: 18px;\n`;\n_c = CurrenciesContainer;\nconst Currency = styled.span`\n  font-size: 18;\n  cursor: pointer;\n`;\n_c2 = Currency;\nconst CurrenciesOptions = styled.div`\n  position: absolute;\n  top: 40px;\n  right: -20px;\n  background: #FFFFFF;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 20px 0;\n  box-shadow: 0px 4px 35px rgba(168, 172, 176, 0.19);\n  z-index: 1000;\n  ${props => props.togglePosition && `\n    position: fixed !important;\n    top: 0px !important;\n    right: 123px !important;\n  `}\n`;\n_c3 = CurrenciesOptions;\nconst Option = styled.div`\n  width: 114px;\n  height: 45px;\n  padding-left: 20px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: #EEEEEE;\n  }\n  cursor: pointer;\n`;\n_c4 = Option;\nconst Backdrop = styled.div`\n  position: absolute;\n  margin-top: 80px;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: ${props => props.backdropHeight}px;\n  z-index: 20;\n`;\n_c5 = Backdrop;\nconst ArrowVector = styled.img`\n  margin-left: 7px;\n`;\n_c6 = ArrowVector;\nconst portalElement = document.getElementById(\"overlays\");\n\nclass Currencies extends Component {\n  constructor(props) {\n    super(props);\n    this.currs = this.props.currs;\n\n    this.handleScroll = () => {\n      this.setState({\n        scrolled: document.scrollingElement.scrollTop\n      });\n    };\n\n    this.changeCurrHandler = curr => {\n      this.setState({\n        showCurr: curr\n      });\n      this.props.dispatch(toggleCurrenciesModal());\n      this.props.dispatch(calculateTotals(curr));\n    };\n\n    this.state = {\n      showCurr: this.props.currency.currency,\n      scrolled: 0,\n      backdropHeight: 0\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener('scroll', this.handleScroll, true);\n    this.state.backdropHeight = document.getElementById(\"main\").scrollHeight;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.backdropHeight !== document.getElementById(\"main\").scrollHeight) {\n      this.state.backdropHeight = document.getElementById(\"main\").scrollHeight;\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(CurrenciesContainer, {\n      children: [/*#__PURE__*/_jsxDEV(Currency, {\n        onClick: () => {\n          this.props.dispatch(toggleCurrenciesModal());\n\n          if (this.props.minicartBackdrop.showMinicartBackdrop) {\n            this.props.dispatch(toggleMinicartModal());\n          }\n        },\n        children: [this.state.showCurr.symbol, this.props.currenciesBackdrop.showCurrenciesBackdrop ? /*#__PURE__*/_jsxDEV(ArrowVector, {\n          src: vectorUp\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 67\n        }, this) : /*#__PURE__*/_jsxDEV(ArrowVector, {\n          src: vectorIcon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 99\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), this.props.currenciesBackdrop.showCurrenciesBackdrop && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/_jsxDEV(Backdrop, {\n          backdropHeight: this.state.backdropHeight + 230,\n          onClick: () => this.props.dispatch(toggleCurrenciesModal())\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 36\n        }, this), portalElement), /*#__PURE__*/_jsxDEV(CurrenciesOptions, {\n          togglePosition: this.state.scrolled > 70,\n          children: this.currs.map(curr => {\n            const label = curr.label;\n            const symbol = curr.symbol;\n            return /*#__PURE__*/_jsxDEV(Option, {\n              onClick: () => {\n                this.props.dispatch(updateCurrency({\n                  label,\n                  symbol\n                }));\n                this.changeCurrHandler(curr);\n              },\n              children: [curr.symbol, \" \", curr.label]\n            }, curr.label, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 24\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default _c7 = withParams(Currencies, [\"currency\", \"currenciesBackdrop\", \"minicartBackdrop\"]);\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"CurrenciesContainer\");\n$RefreshReg$(_c2, \"Currency\");\n$RefreshReg$(_c3, \"CurrenciesOptions\");\n$RefreshReg$(_c4, \"Option\");\n$RefreshReg$(_c5, \"Backdrop\");\n$RefreshReg$(_c6, \"ArrowVector\");\n$RefreshReg$(_c7, \"%default%\");","map":{"version":3,"names":["React","Component","vectorIcon","vectorUp","styled","ReactDOM","updateCurrency","calculateTotals","toggleCurrenciesModal","toggleMinicartModal","withParams","CurrenciesContainer","div","Currency","span","CurrenciesOptions","props","togglePosition","Option","Backdrop","backdropHeight","ArrowVector","img","portalElement","document","getElementById","Currencies","constructor","currs","handleScroll","setState","scrolled","scrollingElement","scrollTop","changeCurrHandler","curr","showCurr","dispatch","state","currency","componentDidMount","window","addEventListener","scrollHeight","componentDidUpdate","prevProps","prevState","render","minicartBackdrop","showMinicartBackdrop","symbol","currenciesBackdrop","showCurrenciesBackdrop","createPortal","map","label"],"sources":["D:/projects/scandi-task/client/src/components/Currencies.jsx"],"sourcesContent":["import React, { Component } from 'react';\r\nimport vectorIcon from \"../icons/vector.svg\";\r\nimport vectorUp from \"../icons/vector_up.svg\";\r\nimport styled from \"styled-components\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { updateCurrency } from '../features/currency/currencySlice';\r\nimport { calculateTotals } from '../features/cart/cartSlice';\r\nimport { toggleCurrenciesModal } from '../features/backdrops/currenciesBackdrop';\r\nimport { toggleMinicartModal } from '../features/backdrops/minicartBackdrop';\r\nimport withParams from './withParams';\r\n\r\nconst CurrenciesContainer = styled.div`\r\n  position: relative;\r\n  font-weight: 500;\r\n  font-size: 18px;\r\n`\r\n\r\nconst Currency = styled.span`\r\n  font-size: 18;\r\n  cursor: pointer;\r\n`\r\n\r\nconst CurrenciesOptions = styled.div`\r\n  position: absolute;\r\n  top: 40px;\r\n  right: -20px;\r\n  background: #FFFFFF;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 20px 0;\r\n  box-shadow: 0px 4px 35px rgba(168, 172, 176, 0.19);\r\n  z-index: 1000;\r\n  ${props => props.togglePosition && `\r\n    position: fixed !important;\r\n    top: 0px !important;\r\n    right: 123px !important;\r\n  `}\r\n`\r\n\r\nconst Option = styled.div`\r\n  width: 114px;\r\n  height: 45px;\r\n  padding-left: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  &:hover {\r\n    background: #EEEEEE;\r\n  }\r\n  cursor: pointer;\r\n`\r\n\r\nconst Backdrop = styled.div`\r\n  position: absolute;\r\n  margin-top: 80px;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: ${props => props.backdropHeight}px;\r\n  z-index: 20;\r\n`\r\n\r\nconst ArrowVector = styled.img`\r\n  margin-left: 7px;\r\n`\r\n\r\nconst portalElement = document.getElementById(\"overlays\");\r\n\r\nclass Currencies extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showCurr: this.props.currency.currency,\r\n      scrolled: 0,\r\n      backdropHeight: 0,\r\n    }\r\n  }\r\n\r\n  currs = this.props.currs;\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('scroll', this.handleScroll, true);\r\n    this.state.backdropHeight = document.getElementById(\"main\").scrollHeight;\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.backdropHeight !== document.getElementById(\"main\").scrollHeight) {\r\n      this.state.backdropHeight = document.getElementById(\"main\").scrollHeight;\r\n    }\r\n  }\r\n\r\n  handleScroll = () => {\r\n    this.setState({ scrolled: document.scrollingElement.scrollTop})\r\n  }\r\n\r\n  changeCurrHandler = (curr) => {\r\n    this.setState({ showCurr: curr });\r\n    this.props.dispatch(toggleCurrenciesModal());\r\n    this.props.dispatch(calculateTotals(curr))\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <CurrenciesContainer>\r\n        <Currency onClick={() => {\r\n          this.props.dispatch(toggleCurrenciesModal());\r\n          if (this.props.minicartBackdrop.showMinicartBackdrop) {\r\n            this.props.dispatch(toggleMinicartModal());\r\n          }\r\n        }}>\r\n          {this.state.showCurr.symbol}\r\n          {this.props.currenciesBackdrop.showCurrenciesBackdrop ? <ArrowVector src={vectorUp}/> : <ArrowVector src={vectorIcon}/>}\r\n        </Currency>\r\n        {this.props.currenciesBackdrop.showCurrenciesBackdrop &&\r\n          <>\r\n            {ReactDOM.createPortal(<Backdrop backdropHeight={this.state.backdropHeight + 230} onClick={() => this.props.dispatch(toggleCurrenciesModal())}/>, portalElement)}\r\n            <CurrenciesOptions togglePosition={this.state.scrolled > 70}>\r\n              {this.currs.map(curr => {\r\n                const label = curr.label;\r\n                const symbol = curr.symbol;\r\n                return <Option onClick={() => {\r\n                  this.props.dispatch(updateCurrency({label, symbol}));\r\n                  this.changeCurrHandler(curr);\r\n                }} key={curr.label}>{curr.symbol} {curr.label}</Option>\r\n              })}\r\n            </CurrenciesOptions>\r\n          </>\r\n        }\r\n      </CurrenciesContainer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withParams(Currencies, [\"currency\", \"currenciesBackdrop\", \"minicartBackdrop\"]);"],"mappings":"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"},"metadata":{},"sourceType":"module"}